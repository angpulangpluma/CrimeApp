<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <title>Safe Space</title>
	
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="utils/bootstrap-3.3.6-dist/css/bootstrap.min.css">

	<!-- jQuery library -->
	<script type="text/javascript" src="utils/jquery.min.js"></script>
	
	<!-- Latest compiled JavaScript -->
	<script type="text/javascript" src="utils/bootstrap-3.3.6-dist/js/bootstrap.min.js"></script>
	
	<!--D3-->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
	
	<!--Donut-->
	<script type="text/javascript" src="utils/donut-pie-chart.js"></script>
	
	
    <style>
	body{
	
		background-color: #000;
	
	}
	
	.container {
	  width: 100%;
	  background-color: #ddd;
	}

	.skills {
	  text-align: right;
	  padding-right: 20px;
	  line-height: 20px;
	  color: white;
	}

	.totalCrimeBar {width: 69%; background-color: orange;}
	
	.theftBar {width: 81%; background-color: red;}
	
	.assaultBar {width: 21%; background-color: green;}
	
	.burglaryBar {width: 67%; background-color: orange;}
	
	.car_theftBar {width: 58%; background-color: yellow;}
	
	.drugBar {width: 80%; background-color: red;}
	
	.vandalismBar {width: 44%; background-color: yellow;}
	
	.homicideBar {width: 21%; background-color: green;}
	
	.sexBar {width: 33%; background-color: green;}
	
	#resolved{color:green;}
	
	#unresolved{color:yellow;}
	
	#unresClosed{color:red;}
    </style>
  </head>
  <body>
  
  
	
  
	<!-- Rules Modal -->
		<div id="rulesModal" class="modal fade" role="dialog">
			<div class="modal-dialog">

				<!-- Rules Modal content-->
				<div class="modal-content">
					<div class="modal-header modalHeadStyle" style="background-color:#111;">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title modalTitle" style="color:white;">Crime Details</h4>
				</div>
				<div class="modal-body dialogModal">
					<p class = "dialogText"></p>
					<div class="row">
						<div class="col-md-6"><img id="crimeImg" src="robbery.png" height="50px" width="50px" style="float:right"/></div>
						<div class="col-md-6" style="margin-left:-25px; margin-top: 7px;"><h4 id="crimeTitle">Robbery</h4></div>
					</div>
					
					<div class="row" style="padding-left: 20px; padding-right: 20px;">
					
						<h5 >Crime Level</h5>
						<div class="progress" style="">
							<div id="crimeBar" class="skills"> Very High</div>
						</div>
						
						<div class="row" style="background-color:#111;">
							<div class="exp col-md-6">
							<h4 style="color:white;">Crime Resolution Efficiency</h4></div>
							<div class="col-md-6" style="margin-top:100px;">
								<ul>
									<li id="resolved">
										RESOLVED
									</li>
									<li id="unresolved">
										UNRESOLVED
									</li>
									<li id="unresClosed">
										UNRESOLVED AND CLOSED
									</li>
								</ul>
							</div>
						</div>
						
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default button" data-dismiss="modal">Close</button>
				</div>
				</div>

			</div>
		</div>
  
  
		<div id="compareModal" class="modal fade" role="dialog">
			<div class="modal-dialog">

				<!-- Rules Modal content-->
				<div class="modal-content">
					<div class="modal-header modalHeadStyle">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title modalTitle">Local Crime Levels</h4>
				</div>
				<div class="modal-body dialogModal">
			<table>
				<tr>
					<th>Crime</th>
					<th width=400px>Level</th>
				</tr>
				<tr>
					<td><img src="robbery.png" height="50px" width="50px"/></td>
					<td width=400px>
					<div class="progress" style="">
						<div class="skills theftBar"> Very High</div>
					</div></td>
				</tr>
				<tr>
					<td><img src="assault.png" height="50px" width="50px"/></td>
					<td width=400px><div class="progress" style="">
						<div class="skills assaultBar"> Low</div>
					</div></td>
				</tr>
				<tr>
					<td><img src="burglary.png" height="50px" width="50px"/></td>
					<td width=400px><div class="progress" style="">
						<div class="skills burglaryBar"> High</div>
					</div></td>
				</tr>
				<tr>
					<td><img src="car_theft.png" height="50px" width="50px"/></td>
					<td width=400px><div class="progress" style="">
						<div class="skills car_theftBar"> Moderate</div>
					</div></td>
				</tr>
				<tr>
					<td><img src="drug.png" height="50px" width="50px"/></td>
					<td width=400px><div class="progress">
						  <div class="progress" style="">
						<div class="skills drugBar"> Very High</div>
					</div></td>
				</tr>
				<tr>
					<td><img src="vandalism.png" height="50px" width="50px"/></td>
					<td width=400px><div class="progress">
						  <div class="progress" style="">
						<div class="skills vandalismBar"> Moderate</div>
					</div></td>
				</tr>
				<tr>
					<td><img src="homicide.png" height="50px" width="50px"/></td>
					<td width=400px><div class="progress" style="">
						<div class="skills homicideBar"> Low</div>
					</div></td>
				</tr>
				<tr>
					<td><img src="sex_crime.png" height="50px" width="50px"/></td>
					<td width=400px><div class="progress" style="">
						<div class="skills sexBar"> Low</div>
					</div></td>
				</tr>
				
			</table>
		   
		</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default button" data-dismiss="modal">Close</button>
				</div>
				</div>

			</div>
		</div>
		
  
  
	  <nav class="navbar navbar-inverse">
		  <div class="container-fluid">
			<div class="navbar-header">
			  <a class="navbar-brand" href="#">Safe Space</a>
			</div>
			<ul class="nav navbar-nav">
			  <li><a href="home.html">Home</a></li>
			  <li class="active"><a href="#">Map</a></li>
			  <li><a href="#">About</a></li>
			</ul>
		  </div>
		</nav>
		
		<div id="infoPanel" class="col-md-4" style="height:500px">
		
			<div class="row">
			
				<h1 id="cityName" style="color:#FFF; text-align:center;">
					Manila
				</h1>
				
			</div>
			
			<div class="row">
				<div class="col-md-3" >
					<img src="crime_icon.png" height="70px" width="70px" style="margin-left:40px;" data-toggle="modal" data-target="#compareModal"/>
				</div>
				<div class="col-md-8">
					<h4 style="color:#FFF;">
						Total Level of Crime
					</h4>
					<div class="progress" style="">
						<div id="totalCrimeID" class="skills totalCrimeBar">High</div>
					</div>
				</div>
			</div>
			
			<div class="row">
				<table style="width:70%; margin-left: 100px;">
				  <tr>
					<td>
						<h6 style="color:#FFF;" data-toggle="modal">ROBBERY</h6>
						<img id="robberyID" src="robbery.png" height="50px" width="50px" data-toggle="modal" data-target="#rulesModal" onClick="getSrcID(this.id)" title="Click for more Details" />
						<h6 >
					</td>
					<td>
						<h6 style="color:#FFF; ">ASSAULT</h6>
						<img id="assaultID" src="assault.png" height="50px" width="50px" data-toggle="modal" data-target="#rulesModal" onClick="getSrcID(this.id)" title="Click for more Details"/>
						
					</td>
				  </tr>
				  
				  <tr>
					<td>
						<h6 style="color:#FFF;">BURGLARY</h6>
						<img id="burglaryID" src="burglary.png" height="50px" width="50px" data-toggle="modal" data-target="#rulesModal" onClick="getSrcID(this.id)" title="Click for more Details"/>
						<h6 >
					</td>
					<td>
						<h6 style="color:#FFF; ">CAR THEFT</h6>
						<img id="car_theftID" src="car_theft.png" height="50px" width="50px" data-toggle="modal" data-target="#rulesModal" onClick="getSrcID(this.id)" title="Click for more Details"/>
						
					</td>
				  </tr>
				  
				  <tr>
					<td>
						<h6 style="color:#FFF;">DRUG VIOLATION</h6>
						<img id="drugID" src="drug.png" height="50px" width="50px" data-toggle="modal" data-target="#rulesModal" onClick="getSrcID(this.id)" title="Click for more Details"/>
						<h6 >
					</td>
					<td>
						<h6 style="color:#FFF; ">VANDALISM</h6>
						<img id="vandalismID" src="vandalism.png" height="50px" width="50px" data-toggle="modal" data-target="#rulesModal" onClick="getSrcID(this.id)" title="Click for more Details"/>
						
					</td>
				  </tr>
				  
				  <tr>
					<td>
						<h6 style="color:#FFF;">HOMICDE</h6>
						<img id="homicideID" src="homicide.png" height="50px" width="50px"  data-toggle="modal" data-target="#rulesModal" onClick="getSrcID(this.id)" title="Click for more Details"/>
						<h6 >
					</td>
					<td>
						<h6 style="color:#FFF; ">SEX CRIME</h6>
						<img id="sex_crimeID" src="sex_crime.png" height="50px" width="50px"  data-toggle="modal" data-target="#rulesModal" onClick="getSrcID(this.id)" title="Click for more Details"/>
						
					</td>
				  </tr>
				  
				  
				</table>
			</div>
			
			
		</div>
		
		<div id="map" class="col-md-8" style="height:500px"></div>
   
  </body>
  
   <script>
		
		
		
		
		$(document).ready(function(){
			$('[data-toggle="popover"]').popover();   
			$('[data-toggle="tooltip"]').tooltip(); 
			$(".exp").donutpie();
			
		});

		$('[data-toggle=popover]').popover({
			content: $('#myPopoverContent').html(),
			html: true
		}).click(function() {
			$(this).popover('show');
		});
		
		function getSrcID(id){
			var crimeTitle = document.getElementById("crimeTitle");
			var crimeImg = document.getElementById("crimeImg");
			
			var data = [
			{"name" : "Resolved", "hvalue" : 6, "color": "green" }, 
			{"name" : "Unresolved", "hvalue" : 12, "color": "yellow" }, 
			{"name" : "UnresolvedAndClosed", "hvalue" : 8, "color": "red" }
			];
			
			
			var resolved = document.getElementById("resolved");
			var unresolved = document.getElementById("unresolved");
			var unresClosed = document.getElementById("unresClosed");
			
			if(id == "robberyID"){
				crimeImg.src = "robbery.png"
				crimeTitle.innerHTML = "ROBBERY";
				crimeBar.style.width = "82%";
				crimeBar.style.backgroundColor = "red";
				crimeBar.innerHTML = "Very High";
			}
			
			else if(id == "assaultID"){
				crimeImg.src = "assault.png"
				crimeTitle.innerHTML = "ASSAULT";
				crimeBar.style.width = "32%";
				crimeBar.style.backgroundColor = "green";
				crimeBar.innerHTML = "Low";
			}
			
			else if(id == "burglaryID"){
				crimeImg.src = "burglary.png"
				crimeTitle.innerHTML = "BURGLARY";
				crimeBar.style.width = "67%";
				crimeBar.style.backgroundColor = "orange";
				crimeBar.innerHTML = "High";
			}
			
			else if(id == "car_theftID"){
				crimeImg.src = "car_theft.png"
				crimeTitle.innerHTML = "CAR THEFT";
				crimeBar.style.width = "72%";
				crimeBar.style.backgroundColor = "orange";
				crimeBar.innerHTML = "High";
			}
			
			else if(id == "drugID"){
				crimeImg.src = "drug.png"
				crimeTitle.innerHTML = "DRUG VIOLATION";
				crimeBar.style.width = "80%";
				crimeBar.style.backgroundColor = "red";
				crimeBar.innerHTML = "Very High";
			}
			
			else if(id == "vandalismID"){
				crimeImg.src = "vandalism.png"
				crimeTitle.innerHTML = "VANDALISM";
				crimeBar.style.width = "62%";
				crimeBar.style.backgroundColor = "orange";
				crimeBar.innerHTML = "High";
			}
			
			else if(id == "homicideID"){
				crimeImg.src = "homicide.png"
				crimeTitle.innerHTML = "HOMICIDE";
				crimeBar.style.width = "37%";
				crimeBar.style.backgroundColor = "green";
				crimeBar.innerHTML = "Low";
			}
			
			else if(id == "sex_crimeID"){
				crimeImg.src = "sex_crime.png"
				crimeTitle.innerHTML = "SEX CRIME";
				crimeBar.style.width = "33%";
				crimeBar.style.backgroundColor = "green";
				crimeBar.innerHTML = "Low";
			}
			
			$(".exp").donutpie('update', data);
		}
	
      function initMap() {
		
		var style =
		[
		  {
			"elementType": "geometry",
			"stylers": [
			  {
				"color": "#212121"
			  }
			]
		  },
		  {
			"elementType": "labels.icon",
			"stylers": [
			  {
				"visibility": "off"
			  }
			]
		  },
		  {
			"elementType": "labels.text.fill",
			"stylers": [
			  {
				"color": "#757575"
			  }
			]
		  },
		  {
			"elementType": "labels.text.stroke",
			"stylers": [
			  {
				"color": "#212121"
			  }
			]
		  },
		  {
			"featureType": "administrative",
			"elementType": "geometry",
			"stylers": [
			  {
				"color": "#757575"
			  },
			  {
				"visibility": "off"
			  }
			]
		  },
		  {
			"featureType": "administrative.country",
			"elementType": "labels.text.fill",
			"stylers": [
			  {
				"color": "#9e9e9e"
			  }
			]
		  },
		  {
			"featureType": "administrative.land_parcel",
			"stylers": [
			  {
				"visibility": "off"
			  }
			]
		  },
		  {
			"featureType": "administrative.locality",
			"elementType": "labels.text.fill",
			"stylers": [
			  {
				"color": "#bdbdbd"
			  }
			]
		  },
		  {
			"featureType": "administrative.neighborhood",
			"stylers": [
			  {
				"visibility": "off"
			  }
			]
		  },
		  {
			"featureType": "poi",
			"stylers": [
			  {
				"visibility": "off"
			  }
			]
		  },
		  {
			"featureType": "poi",
			"elementType": "labels.text.fill",
			"stylers": [
			  {
				"color": "#757575"
			  }
			]
		  },
		  {
			"featureType": "poi.park",
			"elementType": "geometry",
			"stylers": [
			  {
				"color": "#181818"
			  }
			]
		  },
		  {
			"featureType": "poi.park",
			"elementType": "labels.text.fill",
			"stylers": [
			  {
				"color": "#616161"
			  }
			]
		  },
		  {
			"featureType": "poi.park",
			"elementType": "labels.text.stroke",
			"stylers": [
			  {
				"color": "#1b1b1b"
			  }
			]
		  },
		  {
			"featureType": "road",
			"elementType": "geometry.fill",
			"stylers": [
			  {
				"color": "#2c2c2c"
			  }
			]
		  },
		  {
			"featureType": "road",
			"elementType": "labels",
			"stylers": [
			  {
				"visibility": "off"
			  }
			]
		  },
		  {
			"featureType": "road",
			"elementType": "labels.icon",
			"stylers": [
			  {
				"visibility": "off"
			  }
			]
		  },
		  {
			"featureType": "road",
			"elementType": "labels.text.fill",
			"stylers": [
			  {
				"color": "#8a8a8a"
			  }
			]
		  },
		  {
			"featureType": "road.arterial",
			"elementType": "geometry",
			"stylers": [
			  {
				"color": "#373737"
			  }
			]
		  },
		  {
			"featureType": "road.arterial",
			"elementType": "labels",
			"stylers": [
			  {
				"visibility": "off"
			  }
			]
		  },
		  {
			"featureType": "road.highway",
			"elementType": "geometry",
			"stylers": [
			  {
				"color": "#3c3c3c"
			  }
			]
		  },
		  {
			"featureType": "road.highway",
			"elementType": "labels",
			"stylers": [
			  {
				"visibility": "off"
			  }
			]
		  },
		  {
			"featureType": "road.highway.controlled_access",
			"elementType": "geometry",
			"stylers": [
			  {
				"color": "#4e4e4e"
			  }
			]
		  },
		  {
			"featureType": "road.local",
			"stylers": [
			  {
				"visibility": "off"
			  }
			]
		  },
		  {
			"featureType": "road.local",
			"elementType": "labels.text.fill",
			"stylers": [
			  {
				"color": "#616161"
			  }
			]
		  },
		  {
			"featureType": "transit",
			"stylers": [
			  {
				"visibility": "off"
			  }
			]
		  },
		  {
			"featureType": "transit",
			"elementType": "labels.text.fill",
			"stylers": [
			  {
				"color": "#757575"
			  }
			]
		  },
		  {
			"featureType": "water",
			"elementType": "geometry",
			"stylers": [
			  {
				"color": "#000000"
			  }
			]
		  },
		  {
			"featureType": "water",
			"elementType": "labels.text",
			"stylers": [
			  {
				"visibility": "off"
			  }
			]
		  },
		  {
			"featureType": "water",
			"elementType": "labels.text.fill",
			"stylers": [
			  {
				"color": "#3d3d3d"
			  }
			]
		  }
		];
	  
		
	  
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 11,
          center: {lat: 14.599512, lng: 120.984222},
		  styles: style,
		  panControl: true,
			zoomControl: false,
			mapTypeControl: false,
			scaleControl: false,
			streetViewControl: false,
			overviewMapControl: true,
			rotateControl: true   
        });

        var ctaLayer = new google.maps.KmlLayer({
          url: 'https://www.google.com/maps/d/u/0/kml?mid=1e99pyY_FQHjEaL_SM6BHWtMilU4&lllll',
		  suppressInfoWindows: true,
          map: map
        });
		
		ctaLayer.addListener('click', function(kmlEvent) {
          var name = kmlEvent.featureData.name;
		  var totalCrimeVal;
		  var totalCrimeDesc;
		  var totalCrimeColor;
          showInContentWindow(name, totalCrimeVal, totalCrimeDesc, totalCrimeColor);
        });
		function showInContentWindow(name, totalCrimeVal, totalCrimeDesc, totalCrimeColor) {
          var sidediv = document.getElementById('cityName');
          sidediv.innerHTML = name;
		  
		  var totalCrimeBar = document.getElementById('totalCrimeID');
		  
		  if(name == "Manila"){
				
				totalCrimeBar.style.backgroundColor = "orange";
				totalCrimeBar.style.width = "69%";
				totalCrimeBar.innerHTML = "High";
			
			}
			
			else if(name == "Malabon"){
				
				totalCrimeBar.style.backgroundColor = "orange";
				totalCrimeBar.style.width = "62%";
				totalCrimeBar.innerHTML = "High";
			
			}
			
			else if(name == "Quezon"){
				
				totalCrimeBar.style.backgroundColor = "orange";
				totalCrimeBar.style.width = "65%";
				totalCrimeBar.innerHTML = "High";
			
			}
			
			else if(name == "Makati"){
				
				totalCrimeBar.style.backgroundColor = "green";
				totalCrimeBar.style.width = "39%";
				totalCrimeBar.innerHTML = "Low";
			
			}
			
			else if(name == "Paranaque"){
				
				totalCrimeBar.style.backgroundColor = "green";
				totalCrimeBar.style.width = "39%";
				totalCrimeBar.innerHTML = "Low";
			
			}
			
			else if(name == "Pasay"){
				
				totalCrimeBar.style.backgroundColor = "red";
				totalCrimeBar.style.width = "81%";
				totalCrimeBar.innerHTML = "Very High";
			
			}
			
			else if(name == "Caloocan"){
				
				totalCrimeBar.style.backgroundColor = "red";
				totalCrimeBar.style.width = "85%";
				totalCrimeBar.innerHTML = "Very High";
			
			}
			
			else if(name == "Taguig"){
				
				totalCrimeBar.style.backgroundColor = "yellow";
				totalCrimeBar.style.width = "55%";
				totalCrimeBar.innerHTML = "Moderate";
			
			}
		  
        }
      }
	  
	  
    </script>
    <script async defer
				src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDjChRm6gFmrE9TC7mEhQMd6_0egWde8q0&callback=initMap">
				</script>
  
</html>